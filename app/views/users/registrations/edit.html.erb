<% content_for :body_classes, 'sign_up' %>

<div id="register-page">
  <% content_for :devise_form do %>
    <h2 class="pt-4 mb-8 text-4xl font-bold heading">Editar perfil</h2>
    <%= bootstrap_form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
      <div class="form-row">
        <div class="form-group col-md-4">
          <%= f.text_field :first_name, class:"form-control" %>
        </div>
        <div class="form-group col-md-4">
          <%= f.text_field :last_name, class:"form-control" %>
        </div>
        <div class="form-group col-md-4">
          <%= f.email_field :email, autocomplete: "email", class:"form-control" %>
        </div>
      </div>
      <div data-controller="province" data-province-locations-url="<%= localities_path %>">
        <div class="form-row">
          <div class="form-group col-md-6">
            <%= f.label :province_id, class: 'label' %>
            <%= select_tag :province_id, options_from_collection_for_select(Province.all, :id, :name, resource.province.id), class: 'form-control', data: { target: 'province.provinceId', action: 'province#findLocalities' } %>
          </div>
          <div class="form-group col-md-6">
            <%= f.collection_select :locality_id, resource.province.localities, :id, :name, {}, class: 'form-control', data: { target: 'province.localityId' } %>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <%= f.text_field :address, class:"form-control" %>
        </div>
        <div class="form-group col-md-6">
          <%= f.text_field :phone, class:"form-control" %>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <%= f.collection_check_boxes :roles, User.roles.humans, :first, :second do |b| %>
            <div class="form-check">
              <%=  b.label(class:"form-check-label") { b.check_box(class:"form-check-input") + b.text}  %>
            </div>
          <% end %>
        </div>
        <div class="form-group col-md-6">
          <%= f.label :available_weeks, "Fines de semana con disponibilidad" %>
          <%= f.collection_check_boxes :week_ids, Week.for_current_month, :id, :name, hide_label: true %>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <div class="flex">
            <%= f.label :password, class: "label" %>
            <% if @minimum_password_length %>
              <span class="pl-1 text-xs text-grey-dark"><small>(Dejar en blanco para no actualizar. Minimo <%= @minimum_password_length %> caracteres)</small></span>
            <% end %>
          </div>
          <%= f.password_field :password, hide_label: true, autocomplete: "new-password", class: "form-control" %>
        </div>
        <div class="form-group col-md-6">
          <%= f.password_field :password_confirmation, autocomplete: "new-password", class: "form-control" %>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <div class="input-group">
            <%= f.password_field :current_password, autocomplete: "current-password", class: "input" %>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-12">
          <%= f.submit class: "btn btn-primary" %>
        </div>
      </div>
    <% end %>
  <% end %>
  <%= render "devise/shared/form_wrap" %>
</div>
