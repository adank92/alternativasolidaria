<div class="row">
  <div class="form-group mb-2">
    <%= select_tag :week, options_from_collection_for_select(Week.for_current_month, :id, :name, @week),
                   prompt: "Todas las semanas", data: { reflex: 'change->Tabular#change_week', reflex_root: '#user-listing' } %>
    <%= select_tag :role, options_from_collection_for_select(User.roles.humans, :first, :second, @role),
                   prompt: "Todos los roles", data: { reflex: 'change->Tabular#change_role', reflex_root: '#user-listing' } %>
    <%= select_tag :province, options_from_collection_for_select(Province.all, :id, :name, @province),
    prompt: "Todas las Provincias", data: { reflex: 'change->Tabular#change_province', reflex_root: '#user-listing' } %>               
    <%= select_tag :locality, options_from_collection_for_select(Locality.all, :id, :name, @locality),
    prompt: "Todas las Localidades", data: { reflex: 'change->Tabular#change_locality', reflex_root: '#user-listing' } %>
  </div>
</div>

<div id="user-listing">
  <div class="row justify-content-between align-items-center">
      <span>Mostrando <%= pluralize(@records.count, 'colaborador', plural: 'colaboradores') %></span>
      <%= render 'shared/paginator' %>
  </div>

  <div class="row">
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
      <thead class="thead-dark">
      <tr>
        <th scope="col">
          Rol
        </th>
        <th scope="col">
          Nombre
        </th>
        <th scope="col">
          Apellido
        </th>
        <th scope="col">
          Provincia
        </th>
        <th scope="col">
          Zona/Comuna
        </th>
        <th scope="col">
          Localidad
        </th>
        <th scope="col">
          Direcci√≥n
        </th>
        <th scope="col">
          Celular
        </th>
        <th scope="col">
          Email
        </th>
      </tr>
      </thead>
      <tbody>
      <% @records.each do |user| %>
        <tr>
          <td>
            <div class="d-flex">
            <% user.roles.each_with_index do |role,index| %>
              <i class="<%= role_icon(role) %> <%= "mr-1" if index.equal?(0) %>" style="font-size: 1.5em"></i>
            <% end %>
            </div>
          </td>
          <td>
            <%= user.first_name %>
          </td>
          <td>
            <%= user.last_name %>
          </td>
          <td>
            <%= user.province.name %>
          </td>
          <td>
            <%= user.department.name %>
          </td>
          <td>
            <%= user.locality.name %>
          </td>
          <td>
            <%= user.address %>
          </td>
          <td>
            <%= user.phone %>
          </td>
          <td>
            <%= user.email %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
    </div>
  </div>

  <div class="row float-right">
    <%= render 'shared/paginator' %>
  </div>
</div>
